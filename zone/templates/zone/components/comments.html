<div class="mdui-row mdui-valign">
    <div class="mdui-col-md-7 mdui-col-xs-11 mdui-col-offset-md-2">
        <form action="{% url 'zone:comment' post.id %}" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="mdui-textfield">
                <textarea class="mdui-textfield-input" id="input-comment" name="content"
                    placeholder="说点难听的~"></textarea>
            </div>
        </form>
    </div>
    <div calss="mdui-col-xs-1">
        <button class="mdui-btn mdui-center" id="comment-submit">评论</button>
    </div>
</div>

{% for comment in comments %}
<div class="mdui-row mdui-valign">
    <div class="mdui-col-offset-md-2 mdui-col-md-1">
        <a href="{% url 'user:user' comment.author.id %}">
            <img src="{{ comment.author.avatar.url }}" class="avatar" />
        </a>
    </div>
    <div class="mdui-col-md-6 mdui-col-xs-10">
        <p class="comment-username">{{comment.author.username}}</p>
        <p class="comment-content">{{comment.content}}</p>
    </div>
    <div class="mdui-col-xs-1">
        <span>
            #{{forloop.counter}}
        </span>
    </div>
</div>
{% endfor %}

<script>
    document.getElementById('comment-submit').addEventListener('click', e => {
        var elem = document.getElementById('input-comment');
        if (elem.value.trim().length == 0) {
            mdui.snackbar('评论不能为空');
        }
        else {
            document.querySelector('form').submit();
        }
    });
</script>